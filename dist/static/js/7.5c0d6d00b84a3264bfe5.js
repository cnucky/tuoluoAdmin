webpackJsonp([7],{Awxu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("P9l9"),i={data:function(){return{tableData:[],total:0,pageSize:20,currentPage:1,dialogFormVisible:!1,form:{name:"",code:""},modalTitle:"添加渠道",modalRules:{name:[{required:!0,message:"请输入渠道名称",trigger:"blur"}],code:[{required:!0,message:"请输入渠道code",trigger:"blur"}]}}},mounted:function(){this.getPipeListData()},methods:{addPipe:function(){this.dialogFormVisible=!0,this.form.name="",this.form.code=""},getPipeListData:function(){var e=this,t={page:this.currentPage,page_size:this.pageSize};Object(o.n)(t).then(function(t){e.tableData=t.results,e.total=t.count})},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.getPipeListData()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=t.form;Object(o.d)(a).then(function(e){e?(t.$message.success("添加成功"),t.dialogFormVisible=!1,t.getPipeListData()):t.$message.error("添加失败")})})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"success"},on:{click:e.addPipe}},[e._v("添加渠道")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"160px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"渠道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"渠道code"}})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.modalTitle,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.modalRules}},[a("el-form-item",{attrs:{label:"渠道名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"渠道code",prop:"code"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{staticClass:"modal_footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(e){a("VpQa")},"data-v-06fab384",null);t.default=l.exports},VpQa:function(e,t){}});
//# sourceMappingURL=7.5c0d6d00b84a3264bfe5.js.map