{"version":3,"sources":["webpack:///src/components/cmsNav.vue","webpack:///./src/components/cmsNav.vue?384c","webpack:///./src/components/cmsNav.vue","webpack:///./src/views/mixins/mixin.js","webpack:///src/views/cms/index.vue","webpack:///./src/views/cms/index.vue?36ff","webpack:///./src/views/cms/index.vue"],"names":["components_cmsNav","render","_vm","this","_h","$createElement","_c","_self","on","tab-click","handleClick","model","value","callback","$$v","activeName","expression","_l","item","key","attrs","label","name","staticRenderFns","Component","__webpack_require__","normalizeComponent","data","mounted","$emit","methods","tab","event","__webpack_exports__","cms","components","navHead","cmsNav","activeIndex","tableData","dialogFormVisible","form","image_url","type","uploadUrl","imageUrl","loading","rule","required","message","trigger","pageSizes","pageSize","total","currentPage","opeType","id","modalTitle","mixins","computed","headerRowStyle","backgroundColor","watch","newVal","oldVal","getActiveIndex","index","getGamesListData","row","handleEdit","handleDel","_this","param","Object","api","then","res","$message","success","catch","err","console","log","addNewGame","handleAvatarSuccess","file","URL","createObjectURL","raw","url","beforeAvatarUpload","isJPG","isLt2M","size","error","submitForm","formName","_this2","$refs","validate","valid","reqData","status","_this3","page","page_size","results","count","handleSizeChange","val","handleCurrentChange","views_cms","staticClass","_v","click","directives","rawName","staticStyle","width","border","header-cell-style","prop","scopedSlots","_u","fn","scope","src","alt","fixed","$event","current-page","page-sizes","page-size","layout","size-change","current-change","title","visible","update:visible","ref","label-width","rules","auto-complete","$set","action","show-file-list","on-success","before-upload","ssrContext"],"mappings":"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","file":"static/js/4.76beda6b5fc9c9cd81a6.js","sourcesContent":["<template>\n    <div>\n        <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\n            <el-tab-pane v-for=\"item in data\" :key=\"item.value\" :label=\"item.name\" :name=\"item.value\">\n            </el-tab-pane>\n        </el-tabs>\n       \n    </div>\n</template>\n\n<script>\nexport default {\n    data(){\n        return{\n            activeName: 0,\n            data:[\n                {\n                    name:'APP国际',\n                    value: '0'\n                },\n                {\n                    name:'APP国内',\n                    value: '1'\n                },\n                {\n                    name:'PC客户端',\n                    value: '2'\n                }\n            ]\n        }\n    },\n    mounted(){\n        this.$emit('activeIndex', this.activeName);\n    },\n    methods:{\n        handleClick(tab,event){\n            this.$emit('activeIndex', this.activeName);\n        }\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/cmsNav.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-tabs',{on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},_vm._l((_vm.data),function(item){return _c('el-tab-pane',{key:item.value,attrs:{\"label\":item.name,\"name\":item.value}})}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-06b9efc8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/cmsNav.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./cmsNav.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./cmsNav.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-06b9efc8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./cmsNav.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/cmsNav.vue\n// module id = null\n// module chunks = ","export default {\n    computed: {\n        headerRowStyle () {\n            return {\n                backgroundColor: '#F5F7FA'\n            };\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/views/mixins/mixin.js","<template>\n    <div class=\"games_manage\">\n        <nav-head @activeIndex=\"getActiveIndex\"></nav-head>\n        <div>\n            <div class=\"operate_btns\">\n                <el-button type=\"primary\">导出</el-button>\n                <el-button type=\"success\" @click=\"addNewGame\">添加游戏</el-button>\n            </div>\n            <el-table :data=\"tableData\" border v-loading=\"loading\" style=\"width: 100%\" :header-cell-style=\"headerRowStyle\">\n                <el-table-column prop=\"id\" label=\"ID\" width=\"80px\"></el-table-column>\n                <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\n                <el-table-column label=\"图标\">\n                     <template slot-scope=\"scope\">\n                        <img :src=\"scope.row.image_url\" width=\"100px\" alt=\"\">\n                    </template>\n                </el-table-column>\n                <!-- <el-table-column prop=\"name\" label=\"提供商\"></el-table-column>\n                <el-table-column prop=\"name\" label=\"备注\"></el-table-column> -->\n                <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\n                    <template slot-scope=\"scope\">\n                        <!-- <el-button @click=\"handleClick(scope.row)\" type=\"text\" size=\"small\">下架</el-button> -->\n                        <el-button type=\"text\" @click=\"handleEdit(scope.row)\" size=\"small\">编辑</el-button>\n                        <el-button type=\"text\" @click=\"handleDel(scope.row)\" size=\"small\">删除</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <div class=\"page_block\">\n                <el-pagination @size-change=\"handleSizeChange\"\n                @current-change=\"handleCurrentChange\"\n                :current-page=\"currentPage\"\n                :page-sizes=\"pageSizes\"\n                :page-size=\"pageSize\"\n                layout=\"total, sizes, prev, pager, next, jumper\"\n                :total=\"total\">\n                </el-pagination>\n            </div>\n        </div>\n        <!-- 添加游戏 -->\n        <el-dialog :title=\"modalTitle\" :visible.sync=\"dialogFormVisible\" width=\"40%\">\n            <el-form :model=\"form\" ref=\"form\" label-width=\"100px\" :rules=\"rule\">\n                <el-form-item label=\"游戏名称\" prop=\"name\">\n                    <el-input v-model=\"form.name\" auto-complete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"游戏图标\" prop=\"image_url\">\n                   <el-input v-model=\"form.image_url\" class=\"icon_url\" auto-complete=\"off\"></el-input>\n                   <el-upload class=\"avatar-uploader\"\n                    :action='uploadUrl'\n                    :show-file-list=\"false\"\n                    :on-success=\"handleAvatarSuccess\"\n                    :before-upload=\"beforeAvatarUpload\">\n                    <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n                    <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n                    </el-upload>\n                </el-form-item>\n                <el-form-item class=\"modal_btns\">\n                    <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n                    <el-button type=\"primary\" @click=\"submitForm('form')\">确 定</el-button>\n                </el-form-item>\n            </el-form>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport mixin from '../mixins/mixin'\nimport navHead from '@/components/cmsNav'\nimport {addGames,getGamesList,delGame,updateGame} from '@/api/api'\nexport default {\n    components:{navHead},\n    data(){\n        return{\n            activeIndex: 0,\n            tableData:[],\n            dialogFormVisible: false,\n            form:{\n                name:'',\n                image_url:'',\n                type:''   //1 国内  2 国际  3 PC\n            },\n            uploadUrl: '/api/admin/upload/',\n            imageUrl:'',\n            loading: true,\n            rule:{\n                name:[\n                    { required: true, message: '请输入名称', trigger: 'blur' }\n                ],\n                image_url:[\n                    { required: true, message: '请上传图标', trigger: 'blur' }\n                ]\n            },\n            pageSizes:[20],\n            pageSize: 20,\n            total: 0,\n            currentPage: 1,\n            opeType: '',\n            id:'',\n            modalTitle:'添加游戏'\n        }\n    },\n    mixins: [ mixin ],\n    watch:{\n        'activeIndex': function(newVal, oldVal){\n            if(newVal == oldVal){\n                return;\n            }else{\n                this.loading = true;\n                this.form.name = '';\n                this.form.image_url = '';\n                this.imageUrl = '';\n            }   \n\n        }\n    },\n    \n    methods:{\n        getActiveIndex(index){\n            this.activeIndex = index;\n            if(index == 0){ //APP国际\n                this.form.type = 2\n            }else if(index == 1){  //APP国内\n                this.form.type = 1\n            }else if(index == 2){  //PC客户端\n                this.form.type = 3\n            }\n            this.getGamesListData();\n        },\n        handleClick(row){\n\n        },\n        handleEdit(row){\n            this.dialogFormVisible = true;\n            this.form.name = row.name;\n            this.form.image_url = row.image_url;\n            this.imageUrl = row.image_url;\n            this.opeType = 'update';\n            this.id = row.id;\n            this.modalTitle = '修改游戏';\n        },\n        handleDel(row){\n            const param = {\n                id: row.id\n            }\n            delGame(param).then(\n                res =>{\n                    this.$message.success('删除成功');\n                    this.getGamesListData();\n                }\n            ).catch(\n                err =>{\n                    console.log(err);\n                }\n            )\n        },\n        addNewGame(){\n            this.dialogFormVisible = true;\n            this.form.name = \"\";\n            this.form.image_url = \"\";\n            this.imageUrl = \"\";\n            this.opeType = 'add';\n            this.modalTitle = '添加游戏';\n        },\n        handleAvatarSuccess(res, file) {\n            this.imageUrl = URL.createObjectURL(file.raw);\n            this.form.image_url = res.url;\n        },\n        beforeAvatarUpload(file) {\n            console.log(file);\n            let isJPG = false;\n            let type = file.type;\n            if(type === 'image/jpeg' || type === 'image/png' || type === 'image/jpg'){\n                isJPG = true\n            }\n            const isLt2M = file.size / 1024 / 1024 < 2;\n            if (!isJPG) {\n            this.$message.error('上传图标只能是 JPG/PNG 格式!');\n            }\n            if (!isLt2M) {\n            this.$message.error('上传图标大小不能超过 2MB!');\n            }\n            return isJPG && isLt2M;\n        },\n        submitForm(formName){\n            this.$refs[formName].validate((valid) => {\n                if (valid) {\n                    \n                   const reqData = this.form;\n                   console.log(this.opeType);\n\n                   if(this.opeType == 'add'){\n                       addGames(reqData).then(\n                            res =>{\n                                if(res && res.status == 'ok'){\n                                    this.$message.success('添加成功');\n                                    this.getGamesListData();\n                                }else{\n                                    this.$message.success('添加失败');\n                                }\n                                this.dialogFormVisible = false;\n                            }\n                        ).catch(\n                            err=>{\n                                console.log(err);\n                            }\n                        )\n                   }else if(this.opeType == 'update'){\n                       const param = {\n                           id: this.id\n                       }\n                       updateGame(param,reqData).then(\n                            res =>{\n                                if(res && res.status == 'ok'){\n                                    this.$message.success('修改成功');\n                                    this.getGamesListData();\n                                }else{\n                                    this.$message.success('修改失败');\n                                }\n                                this.dialogFormVisible = false;\n                            }\n                        ).catch(\n                            err=>{\n                                console.log(err);\n                            }\n                        )\n                   }\n\n                   \n                } else {\n                    console.log('error submit!!');\n                    return false;\n                }\n            });\n        },\n        getGamesListData(){\n            const param = {\n                type: this.form.type,\n                page: this.currentPage,\n                page_size: this.pageSize\n            }\n            getGamesList(param).then(\n                res =>{\n                    if(res && res.results){\n                        this.tableData = res.results;\n                        this.total = res.count;\n                        this.loading = false;\n                    }else{\n                        this.tableData = [];\n                    }\n                }\n            ).catch(\n                err=>{\n                    console.log('err',err);\n                }\n            )\n        },\n        handleSizeChange(val) {\n            console.log(`每页 ${val} 条`);\n        },\n        handleCurrentChange(val) {\n            console.log(`当前页: ${val}`);\n            this.currentPage = val;\n            this.getGamesListData();\n        }\n        \n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.games_manage{\n    text-align: left;\n    .avatar-uploader .el-upload {\n        border: 1px dashed #d9d9d9;\n        border-radius: 6px;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n    }\n    .avatar-uploader .el-upload:hover {\n        border-color: #409EFF;\n    }\n    .avatar-uploader-icon {\n        font-size: 28px;\n        color: #8c939d;\n        width: 138px;\n        height: 138px;\n        line-height: 138px;\n        border: 1px dashed #dcdfe6;\n        text-align: center;\n    }\n    .avatar {\n        width: 136px;\n        height: 136px;\n        display: block;\n    }\n    .operate_btns{\n        margin: 0 0 20px 0;\n    }\n    .el-form-item__content{\n        float: left;\n        \n    }\n    .icon_url{\n        display: none;\n    }\n}\n</style>\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/views/cms/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"games_manage\"},[_c('nav-head',{on:{\"activeIndex\":_vm.getActiveIndex}}),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"operate_btns\"},[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"导出\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.addNewGame}},[_vm._v(\"添加游戏\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"header-cell-style\":_vm.headerRowStyle}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"80px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"图标\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{attrs:{\"src\":scope.row.image_url,\"width\":\"100px\",\"alt\":\"\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.handleEdit(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.handleDel(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"page_block\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":_vm.pageSizes,\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.modalTitle,\"visible\":_vm.dialogFormVisible,\"width\":\"40%\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"100px\",\"rules\":_vm.rule}},[_c('el-form-item',{attrs:{\"label\":\"游戏名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"游戏图标\",\"prop\":\"image_url\"}},[_c('el-input',{staticClass:\"icon_url\",attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.form.image_url),callback:function ($$v) {_vm.$set(_vm.form, \"image_url\", $$v)},expression:\"form.image_url\"}}),_vm._v(\" \"),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"modal_btns\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('form')}}},[_vm._v(\"确 定\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7a4b4216\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/cms/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7a4b4216\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a4b4216\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7a4b4216\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/cms/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}