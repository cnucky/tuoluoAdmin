webpackJsonp([20],{"0FZS":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("P9l9"),r={data:function(){return{account_data:[],rechargeDialogFormVisible:!1,rechargeForm:{day:1},formLabelWidth:"80px",user_row:"",currentPage:1,total_items:0,page_num:0}},created:function(){},methods:{get_customers:function(){var e=this;Object(n.i)().then(function(t){e.account_data=t.results,e.total_items=t.count})},handleSetAdmin:function(e,t){t.id},handleCancelAdmin:function(e,t){t.id},handleRecharge:function(e,t){this.rechargeForm.day=1,this.user_row=t,this.rechargeDialogFormVisible=!0},handleSetInviteCode:function(e,t){var a=this,r={id:t.id};Object(n.r)(r).then(function(e){e&&"ok"==e.status?(a.$message.success("设置邀请码成功"),a.get_customers()):a.$message.success("设置邀请码失败")})},confirm:function(){console.log(this.user_row),this.confrimRecharge()},confrimRecharge:function(e){var t=this;this.$confirm("确认赠送 "+this.rechargeForm.day+" 天？").then(function(a){var r={id:t.user_row.id},o={day:t.rechargeForm.day};Object(n.q)(r,o).then(function(e){e&&"ok"==e.status?(t.$message.success("赠送成功"),t.get_customers()):t.$message.success("赠送失败")}),t.rechargeDialogFormVisible=!1,e()}).catch(function(e){})},handleCurrentChange:function(e){var t=this;console.log("当前页: "+e);var a={num:e};Object(n.p)(a).then(function(e){t.account_data=e.results})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.account_data,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否超级管理员"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_admin?a("el-tag",{attrs:{type:t.row.is_admin?"success":"error","close-transition":""}},[e._v("是\n        ")]):a("el-tag",{attrs:{type:t.row.is_admin?"success":"error","close-transition":""}},[e._v("否\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account_invite_code",label:"邀请码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account_end_time",label:"截止时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"赠送时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.account_extra_time)+" 天")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"330px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_admin?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){e.handleCancelAdmin(t.$index,t.row)}}},[e._v("取消管理员")]):a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.handleSetAdmin(t.$index,t.row)}}},[e._v("设置管理员")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleRecharge(t.$index,t.row)}}},[e._v("赠送天数")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[20],"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:e.total_items},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"赠送提示",visible:e.rechargeDialogFormVisible,width:"400px"},on:{"update:visible":function(t){e.rechargeDialogFormVisible=t}}},[a("el-form",{attrs:{model:e.rechargeForm}},[a("el-form-item",{attrs:{label:"赠送天数","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.rechargeForm.day,callback:function(t){e.$set(e.rechargeForm,"day",t)},expression:"rechargeForm.day"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.rechargeDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.confirm()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},i=a("VU/8")(r,o,!1,null,null,null);t.default=i.exports}});
//# sourceMappingURL=20.80f2f49c58e2d3cc1d5f.js.map