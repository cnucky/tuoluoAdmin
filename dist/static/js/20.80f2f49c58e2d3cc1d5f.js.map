{"version":3,"sources":["webpack:///src/views/account/index.vue","webpack:///./src/views/account/index.vue?2eec","webpack:///./src/views/account/index.vue"],"names":["account","data","account_data","rechargeDialogFormVisible","rechargeForm","day","formLabelWidth","user_row","currentPage","total_items","page_num","created","methods","get_customers","_this","this","Object","api","then","resData","results","count","handleSetAdmin","index","row","id","handleCancelAdmin","handleRecharge","handleSetInviteCode","_this2","param","status","$message","success","confirm","console","log","confrimRecharge","done","_this3","$confirm","_","reqData","catch","handleCurrentChange","val","_this4","num","views_account","render","_vm","_h","$createElement","_c","_self","staticStyle","width","attrs","border","prop","label","_v","scopedSlots","_u","key","fn","scope","is_admin","type","close-transition","margin-left","_s","account_extra_time","size","on","click","$event","$index","staticClass","current-page","page-sizes","page-size","layout","total","current-change","title","visible","update:visible","model","label-width","auto-complete","value","callback","$$v","$set","expression","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/20.80f2f49c58e2d3cc1d5f.js","sourcesContent":["<template>\n  <div>\n    <el-table :data=\"account_data\" border style=\"width: 100%\">\n\n    <el-table-column prop=\"id\" label=\"用户ID\" width=\"70px\"></el-table-column>\n    <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n    <el-table-column label=\"是否超级管理员\">\n      <template slot-scope=\"scope\">\n\n        <!-- 是 -->\n        <el-tag v-if=\"!!scope.row.is_admin\"\n          :type=\"!!scope.row.is_admin ? 'success' : 'error'\"\n          close-transition>是\n        </el-tag>\n        <!-- 否 -->\n        <el-tag v-else\n          :type=\"!!scope.row.is_admin ? 'success' : 'error'\"\n          close-transition>否\n        </el-tag>\n\n        <!-- <span style=\"margin-left: 10px\" v-if=\"!!scope.row.is_admin\">是</span>\n        <span style=\"margin-left: 10px\" v-else>否</span> -->\n        \n      </template>\n    </el-table-column>\n    <el-table-column prop=\"account_invite_code\" label=\"邀请码\"></el-table-column>\n    <el-table-column prop=\"account_end_time\" label=\"截止时间\"></el-table-column>\n    <el-table-column label=\"赠送时间\">\n      <template slot-scope=\"scope\">\n        <span style=\"margin-left: 10px\">{{ scope.row.account_extra_time }} 天</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"操作\" width=\"330px\">\n      <template slot-scope=\"scope\">\n        <el-button size=\"mini\" type=\"success\" v-if=\"!scope.row.is_admin\"\n          @click=\"handleSetAdmin(scope.$index, scope.row)\">设置管理员</el-button>\n        <el-button size=\"mini\" type=\"warning\" v-else\n          @click=\"handleCancelAdmin(scope.$index, scope.row)\">取消管理员</el-button>\n          \n          <!-- <el-button size=\"mini\" type=\"primary\"\n          @click=\"handleSetInviteCode(scope.$index, scope.row)\">设置邀请码 </el-button> -->\n          <el-button size=\"mini\" type=\"danger\"\n          @click=\"handleRecharge(scope.$index, scope.row)\">赠送天数</el-button>\n      </template>\n    </el-table-column>\n  </el-table>\n  <!-- 分页 -->\n  <div class=\"block\">\n    <el-pagination @current-change=\"handleCurrentChange\"\n      :current-page=\"currentPage\"\n      :page-sizes=\"[20]\"\n      :page-size=\"20\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"total_items\">\n    </el-pagination>\n  </div>\n\n  <el-dialog title=\"赠送提示\" :visible.sync=\"rechargeDialogFormVisible\" width=\"400px\">\n  <el-form :model=\"rechargeForm\">\n    <el-form-item label=\"赠送天数\" :label-width=\"formLabelWidth\">\n      <el-input v-model=\"rechargeForm.day\" auto-complete=\"off\"></el-input>\n    </el-form-item>\n   \n  </el-form>\n  <div slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"rechargeDialogFormVisible = false\">取 消</el-button>\n    <el-button type=\"primary\" @click=\"confirm()\">确 定</el-button>\n  </div>\n  \n</el-dialog>\n  </div>\n</template>\n<script>\nimport{getCustomers, setAdmin, setExtraDays, setInviteCode, setAdminNormal,page } from '@/api/api'\nexport default {\n  data(){\n    return {\n      account_data:[],\n      rechargeDialogFormVisible: false,\n        rechargeForm: {\n          day: 1\n        },\n        formLabelWidth: '80px',\n        user_row:'',   //当前操作的行\n        currentPage: 1,\n        total_items: 0,  //总条数\n        page_num: 0,   //要跳转到的页码\n      \n    }\n  },\n  created () {\n    // this.get_customers();\n  },\n  methods: {\n    get_customers(){\n      \n      getCustomers().then(\n        (resData) => {\n          this.account_data = resData.results;\n          this.total_items = resData.count;\n        }\n      )\n    },\n    //设置管理员\n    handleSetAdmin(index, row) {\n      var param = {\n        id: row.id\n      }\n      // setAdmin(param).then(\n      //   (resData) => {\n      //     if(resData && resData.status == 'ok'){\n      //       this.$message.success('设置管理员成功');   \n      //       this.get_customers();   //刷新列表   \n      //     }else{\n      //       this.$message.success('设置管理员失败');  \n      //     }\n      //   }\n      // )\n    },\n    //取消管理员\n    handleCancelAdmin(index, row) {\n      var param = {\n        id: row.id\n      }\n      // setAdminNormal(param).then(\n      //   (resData) => {\n      //     if(resData && resData.status == 'ok'){\n      //       this.$message.success('取消管理员成功');   \n      //       this.get_customers();   //刷新列表   \n      //     }else{\n      //       this.$message.success('取消管理员失败');  \n      //     }\n      //   }\n      // )\n    },\n    \n    //赠送天数\n    handleRecharge(index, row) {\n      this.rechargeForm.day = 1; //重置赠送金额\n      this.user_row = row;\n      this.rechargeDialogFormVisible = true;\n    },\n    //设置邀请码\n    handleSetInviteCode(index, row){\n      var param = {\n        id: row.id\n      }\n      setInviteCode(param).then(\n        (resData) => {\n          if(resData && resData.status == 'ok'){\n            this.$message.success('设置邀请码成功');   \n            this.get_customers();   //刷新列表   \n          }else{\n            this.$message.success('设置邀请码失败');  \n          }\n        }\n      )\n    },\n    confirm(){\n      console.log(this.user_row);\n      this.confrimRecharge();\n    },\n    //确认赠送天数\n    confrimRecharge(done) {\n     this.$confirm(`确认赠送 ${this.rechargeForm.day} 天？`)\n          .then(_ => {\n            var param = {\n              id: this.user_row.id\n            }\n            var reqData = {\n              \"day\": this.rechargeForm.day\n            }\n            setExtraDays(param, reqData).then(\n              (resData) =>{\n                if(resData && resData.status == 'ok'){\n                  this.$message.success('赠送成功');   \n                  this.get_customers();   //刷新列表   \n                }else{\n                  this.$message.success('赠送失败');  \n                }\n                        \n              }\n            )\n            this.rechargeDialogFormVisible = false;\n            done();\n          })\n          .catch(_ => {});\n    },\n    \n    //分页\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`);\n      var param = {\n        num: val\n      }\n      page(param).then(\n        (resData) =>{\n          this.account_data = resData.results; \n        }\n      )\n    }\n   \n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/account/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.account_data,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"用户ID\",\"width\":\"70px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"是否超级管理员\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!!scope.row.is_admin)?_c('el-tag',{attrs:{\"type\":!!scope.row.is_admin ? 'success' : 'error',\"close-transition\":\"\"}},[_vm._v(\"是\\n        \")]):_c('el-tag',{attrs:{\"type\":!!scope.row.is_admin ? 'success' : 'error',\"close-transition\":\"\"}},[_vm._v(\"否\\n        \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"account_invite_code\",\"label\":\"邀请码\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"account_end_time\",\"label\":\"截止时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"赠送时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(scope.row.account_extra_time)+\" 天\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"330px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!scope.row.is_admin)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"success\"},on:{\"click\":function($event){_vm.handleSetAdmin(scope.$index, scope.row)}}},[_vm._v(\"设置管理员\")]):_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\"},on:{\"click\":function($event){_vm.handleCancelAdmin(scope.$index, scope.row)}}},[_vm._v(\"取消管理员\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.handleRecharge(scope.$index, scope.row)}}},[_vm._v(\"赠送天数\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"block\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":[20],\"page-size\":20,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total_items},on:{\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"赠送提示\",\"visible\":_vm.rechargeDialogFormVisible,\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.rechargeDialogFormVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.rechargeForm}},[_c('el-form-item',{attrs:{\"label\":\"赠送天数\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.rechargeForm.day),callback:function ($$v) {_vm.$set(_vm.rechargeForm, \"day\", $$v)},expression:\"rechargeForm.day\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.rechargeDialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.confirm()}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4cb58af1\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/account/index.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4cb58af1\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/account/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}